<!DOCTYPE html>
<html>
<head>
	<title>Game One - Kristopher Merolla</title>
	<link rel="stylesheet" type="text/css" href="game_one_style.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script> <!-- link to jQuery library -->
	<script>

		function animateRight() {
			setTimeout(function() {
				$("#protagonist").attr("src","look_right.png");
			}, 100);
			setTimeout(function() {
				$("#protagonist").attr("src","move_right.png");
			}, 200);
			setTimeout(function() {
				$("#protagonist").attr("src","look_right.png");
			}, 350);
			setTimeout(function() {
				$("#protagonist").attr("src","standing_stickman.png");
			}, 400);
			$("#protagonist").animate({marginLeft: "+=30px"}, 150);
		}

		function animateLeft() {
			setTimeout(function() {
				$("#protagonist").attr("src","look_left.png");
			}, 100);
			setTimeout(function() {
				$("#protagonist").attr("src","move_left.png");
			}, 200);
			setTimeout(function() {
				$("#protagonist").attr("src","look_left.png");
			}, 350);
			setTimeout(function() {
				$("#protagonist").attr("src","standing_stickman_left.png");
			}, 400);
			$("#protagonist").animate({marginLeft: "-=30px"}, 150);
		}

		function animateShoot() {
			if (last_dir=="right") {
				setTimeout(function() {
					$("#protagonist").attr("src","shoot_right.png");
				}, 100);
				setTimeout(function() {
					$("#protagonist").attr("src","standing_stickman.png");
				}, 300);
				var pos_top = $("#protagonist").offset().top;
				var pos_left = $("#protagonist").offset().left;
				$("#beam_left").css({top: pos_top+20, left: pos_left+60, position:'absolute'});
				var right_edge = ($("#protagonist").offset().left)+145.5; //here, 145.5 is the position of the right edge of the game box
				$("#beam_left").toggle();
				$("#beam_left").animate({left: "+=200px"}, 300);
				setTimeout(function() {
					$("#beam_left").toggle();
				}, 300);
			}
			if (last_dir=="left") {
				setTimeout(function() {
					$("#protagonist").attr("src","shoot_left.png");
				}, 100);
				setTimeout(function() {
					$("#protagonist").attr("src","standing_stickman_left.png");
				}, 300);
				var pos_top = $("#protagonist").offset().top;
				var pos_left = $("#protagonist").offset().left;
				$("#beam").css({top: pos_top+20, left: pos_left-15, position:'absolute'});
				var left_edge = ($("#protagonist").offset().left)-145.5; //here, 145.5 is the position of the left edge of the game box
				$("#beam").toggle();
				$("#beam").animate({left: "-=200px"}, 300);
				setTimeout(function() {
					$("#beam").toggle();
				}, 300);
			}
		}

		function animateJump() {
			if (last_dir=="right") {
				setTimeout(function() {
					$("#protagonist").attr("src","jump_man.png");
				}, 100);
				setTimeout(function() {
					$("#protagonist").attr("src","standing_stickman.png");
				}, 300);
				$("#protagonist").animate({marginTop: "-=60px"}, 300);
				$("#protagonist").animate({marginTop: "+=60px"}, 300);
			}
			if (last_dir=="left") {
				setTimeout(function() {
					$("#protagonist").attr("src","jump_man_left.png");
				}, 100);
				setTimeout(function() {
					$("#protagonist").attr("src","standing_stickman_left.png");
				}, 300);
				$("#protagonist").animate({marginTop: "-=60px"}, 300);
				$("#protagonist").animate({marginTop: "+=60px"}, 300);
			}
		}

		function moveFunction(event) { //function to be called to move the character around
			console.log(last_click+" clicked");
			if (last_click=="left") {
				animateLeft();
			}
			if (last_click=="right") {
				animateRight();
			}
			if (last_click=="shoot") {
				animateShoot();
			}
			if (last_click=="jump") {
				animateJump();
			}
		}

		var last_click = ""; //this variable will remember what the last button clicked was (left, right, jump, shoot)
		var last_dir = "right"; //default direction to start as right
				
		$(document).ready(function() {
			$("#left_button").click(function(event) {
				event.stopPropagation();
				last_click = "left";
				last_dir="left";
				moveFunction();
			});
			$("#right_button").click(function(event) {
				event.stopPropagation();
				last_click = "right";
				last_dir="right";
				moveFunction();
			});
			$("#shoot_button").click(function(event) {
				event.stopPropagation();
				last_click = "shoot";
				moveFunction();
			});
			$("#jump_button").click(function(event) {
				event.stopPropagation();
				last_click = "jump";
				moveFunction();
			});
		}); //end of document.ready function

	</script>
</head>
<body>
	<div id="big_wrapper">

		<div id="game_space">

			<img src="beam.png" alt="beam left" id="beam" class="beam" style="display: none;"/> <!-- beams, hidden by default -->
			<img src="standing_stickman.png" alt="standing stickman" id="protagonist" /> <!-- our protagonist! -->
			<img src="beam_left.png" alt="beam" id="beam_left" class="beam" style="display: none;"/> <!-- beams, hidden by default -->

		</div> <!-- end of game_space -->
		<div id="control_space">
			<img src="left.png" alt="left button" id="left_button" class="button" />
			<img src="right.png" alt="right button" id="right_button" class="button" />
			<img src="shoot.png" alt="shoot button" id="shoot_button" class="button" />
			<img src="up.png" alt="jump button" id="jump_button" class="button"/>
		</div> <!-- end of control_space -->
	</div> <!-- end of big_wrapper -->
</body>
</html>